//Raymond@HZHL3 ~/code/go/src/github.com/rhu1/scribble-go-runtime
//$ ~/code/eclipse/scribble/github.com/rhu1-go/scribble-java/bin/scribblec-param.sh test/foreach/foreach08/Foreach8.scr -d test/foreach/foreach08/ -param Proto1 github.com/rhu1/scribble-go-runtime/test/foreach/foreach08/Foreach8 -param-api W


// http://sandbox.kidstrythisathome.com/erdos/


module Foreach8;


sig <go> "messages.Foo" from "github.com/rhu1/scribble-go-runtime/test/foreach/foreach08/messages" as Foo;


global protocol Proto1(role W)
{
	foreach W[I:1,K-1], W[J:2,K]
	{
		Foo from W[I] to W[J];
	}
}

/*
- check self and K against variant
- check K against family?


(assert (exists ((K Int)) (and (>= K 1) 

(exists ((self Int)) (and (and (>= self 1) (<= self (- K 1)) (<= 1 (- K 1))) (and (>= self 2) (<= self K) (<= 2 K)))) 

(exists ((self Int)) (and (and (>= self 2) (<= self K) (<= 2 K)) (and (not (and (>= self 1) (<= self (- K 1)))) (<= 1 (- K 1))))) 

(not (exists ((self Int)) (and (and (>= self 1) (<= self (- K 1)) (<= 1 (- K 1))) (and (not (and (>= self 2) (<= self K))) (<= 2 K)))))

)))
*/





// family1 ring -- FIXME: tcp broken
// ring with branch+recursion
// fix rolename-foreachvar binding check in WF
// param val runtime checks
// check foreachvar WF
// foreach with multi-param iteration (add thirdparty to Ring loop -- may need merge)

// variant "equivalence"
// short endpoint kind type names, e.g., 1to1 -- cf., already shortened I/O method names
// "constant" interval computations
// parallel-foreach
// fancy API
// better family names or info in comments

// godoc for APIs
// check duplicate message labels in protocol and branching
// reconsider common endpoint kind factoring and dial/accept -- e.g., pipeline dial/accept variants, cf., dial/accept neighbour

// duck typing as "trait subtyping" ?
